<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to Wavelet-based Core Inflation Using wavcoreinf • wavcoreinf</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Wavelet-based Core Inflation Using wavcoreinf">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">wavcoreinf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/wavcoreinf.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to Wavelet-based Core Inflation Using wavcoreinf</h1>
                        <h4 class="author">Nelson Silva</h4>
            
            <h4 class="date">2020-07-12</h4>
      
      
      <div class="hidden name"><code>wavcoreinf.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(wavcoreinf)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyr)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(purrr)</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rlang)</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lubridate)</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(forecast)</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ellipsis)</a></code></pre></div>
<p>The main goal of this vignette is to construct an example showing how a wavelet-based core inflation measure can be obtained from the wavcoreinf package. Then, this wavelet-based core inflation measure is compared with other tranditional measures. Data is the same as in the database coreinf_br. This database contains the headline inflation and core inflation measures of the Brazilian economy. The example is based on empirical Bayes thresholding on the levels of a wavelet transform method that is available in the R package EbayesThresh. Measures based on other methods can be constructed in the same way.</p>
<div id="data-brazilian-headline-inflation-and-core-inflation" class="section level2">
<h2 class="hasAnchor">
<a href="#data-brazilian-headline-inflation-and-core-inflation" class="anchor"></a>Data: Brazilian Headline Inflation and Core Inflation</h2>
<p>Getting data</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">n &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">433</span>, <span class="dv">11427</span>, <span class="dv">16121</span>, <span class="dv">27838</span>, <span class="dv">27839</span>, <span class="dv">11426</span>, <span class="dv">4466</span>, <span class="dv">16122</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"ipca"</span>, <span class="st">"ipcams"</span>, <span class="st">"ipcama"</span>, <span class="st">"ipcaex0"</span>, <span class="st">"ipcaex1"</span>, <span class="st">"ipcadp"</span>, <span class="st">"ipcaex2"</span>, <span class="st">"ipcaex3"</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co"># inf &lt;- getsgs(x, n)</span></a></code></pre></div>
<p>Creating individual time series from 2006-07-01 to 2019-08-01</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">coreinf_br2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(coreinf_br, date <span class="op">&gt;=</span><span class="st"> "2006-07-01"</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">date &lt;-<span class="st"> </span>coreinf_br2[[<span class="st">"date"</span>]]</a>
<a class="sourceLine" id="cb3-3" title="3">ts_start &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">year</span>(date[<span class="dv">1</span>]), <span class="kw">month</span>(date[<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span>(x)) {</a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="kw"><a href="https://rdrr.io/r/base/assign.html">assign</a></span>(x[[i]], <span class="kw"><a href="https://rdrr.io/r/stats/ts.html">ts</a></span>(coreinf_br2[[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>]], <span class="dt">start =</span> ts_start, <span class="dt">freq =</span> <span class="dv">12</span>))</a>
<a class="sourceLine" id="cb3-6" title="6">}</a></code></pre></div>
</div>
<div id="wavelet-core-inflation" class="section level2">
<h2 class="hasAnchor">
<a href="#wavelet-core-inflation" class="anchor"></a>Wavelet Core Inflation</h2>
<p>lags</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">pq &lt;-<span class="st"> </span><span class="kw"><a href="../reference/lags.html">lags</a></span>(<span class="dv">2</span>, <span class="dv">1</span>)</a></code></pre></div>
<p>Setting wavelet parameters</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">ebthr_xform &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">wt =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"dwt"</span>, <span class="st">"modwt"</span>))</a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3">ebthr_wt &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="dt">wf =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"haar"</span>, <span class="st">"la8"</span>),</a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">n.levels =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb5-6" title="6">)</a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8">ebthr_ebwav &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="dt">vscale =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"level"</span>, <span class="st">"independet"</span>),</a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="dt">a =</span> <span class="fl">3.83</span>,</a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="dt">prior =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"laplace"</span>, <span class="st">"cauchy"</span>)</a>
<a class="sourceLine" id="cb5-12" title="12">)</a>
<a class="sourceLine" id="cb5-13" title="13"></a>
<a class="sourceLine" id="cb5-14" title="14">ebthr_args &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wav_args_ebthr.html">wav_args_ebthr</a></span>(ebthr_xform, ebthr_wt, ebthr_ebwav)</a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; Warning: `as.tibble()` is deprecated as of tibble 2.0.0.</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; Please use `as_tibble()` instead.</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; The signature and semantics have changed, see `?as_tibble`.</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; This warning is displayed once every 8 hours.</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; Call `lifecycle::last_warnings()` to see where this warning was generated.</span></a></code></pre></div>
<p>Determining prior “a” and mutating in ebthr_args$args_tbl</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">a &lt;-<span class="st"> </span>ebthr_args<span class="op">$</span>args_tbl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>a) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">pmap_dbl</a></span>(<span class="op">~</span><span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/safely.html">possibly</a></span>(prior_a, <span class="ot">NULL</span>)(</a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="dt">x =</span> ipca, <span class="dt">h =</span> <span class="dv">3</span>, <span class="dt">k =</span> <span class="dv">15</span>, <span class="dt">lags =</span> pq,</a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="dt">interval =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="dt">tol =</span> <span class="fl">0.4</span>,</a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="dt">wtfun =</span> ..<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-8" title="8">    <span class="dt">wtfunlist =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(..<span class="dv">2</span>, ..<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="dt">vscale =</span> ..<span class="dv">4</span>, <span class="dt">prior =</span> ..<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11">ebthr_args<span class="op">$</span>args_tbl &lt;-<span class="st"> </span>ebthr_args<span class="op">$</span>args_tbl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">a =</span> .env<span class="op">$</span>a)</a></code></pre></div>
<p>Estimates wavelet core inflation and inserts a date column</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">ebthr_smooth &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wav_smooth.html">wav_smooth</a></span>(ipca, ebthr_args)</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3">ebthr_table &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wcore_table.html">wcore_table</a></span>(ebthr_smooth, ipca)</a></code></pre></div>
<p>Statistics for Evaluation of the wavelet core inflation, h = 3 and k = 15 only for faster computation. More realistic h and k could be 12 and 24, respectively.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">ebthr_error_mean &lt;-<span class="st"> </span><span class="kw"><a href="../reference/error_wave_summary.html">error_wave_summary</a></span>(<span class="dv">3</span>, <span class="dt">x =</span> ebthr_args, <span class="dt">y =</span> ipca, <span class="dt">lags =</span> pq, <span class="dt">k =</span> <span class="dv">15</span>, <span class="dt">RMSE =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3">ebthr_summary &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wcore_summary_fcast.html">wcore_summary_fcast</a></span>(ipca, ebthr_table, ebthr_error_mean)</a></code></pre></div>
<p>The best wavelet core inflation</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">ebthr_best &lt;-<span class="st">  </span>ebthr_summary <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/wcore_summary_best.html">wcore_summary_best</a></span>(<span class="dt">d =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>))</a></code></pre></div>
<p>A data frame with the best core inflation</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">ebthr_best_median &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wcore_best_median.html">wcore_best_median</a></span>(ebthr_best)</a></code></pre></div>
<p>Time series of the most appropriate wavelet core inflation</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">bayes2_ts &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/ts.html">ts</a></span>(ebthr_best_median, <span class="dt">start =</span> ts_start, <span class="dt">freq =</span> <span class="dv">12</span>)</a></code></pre></div>
</div>
<div id="analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#analysis" class="anchor"></a>Analysis</h2>
<p>Tibble with headline inflation, traditional and wavelet core inflation</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">inf &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">date =</span> <span class="kw"><a href="https://rdrr.io/r/stats/time.html">time</a></span>(ipca), ipca,</a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="st">`</span><span class="dt">IPCA-MS</span><span class="st">`</span> =<span class="st"> </span>ipcams,</a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="st">`</span><span class="dt">IPCA-EX0</span><span class="st">`</span> =<span class="st"> </span>ipcaex0,</a>
<a class="sourceLine" id="cb12-5" title="5">  <span class="st">`</span><span class="dt">IPCA-EX1</span><span class="st">`</span> =<span class="st"> </span>ipcaex1,</a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="st">`</span><span class="dt">IPCA-DP</span><span class="st">`</span> =<span class="st"> </span>ipcadp,</a>
<a class="sourceLine" id="cb12-7" title="7">  <span class="st">`</span><span class="dt">IPCA-EX2</span><span class="st">`</span> =<span class="st"> </span>ipcaex2,</a>
<a class="sourceLine" id="cb12-8" title="8">  <span class="st">`</span><span class="dt">IPCA-EX3</span><span class="st">`</span> =<span class="st"> </span>ipcaex3,</a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#  `IPCA-UNI` = uni_ts[, 2],</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">#  `IPCA-MIN` = min_ts[, 2],</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#  `IPCA-SURE` = sure_ts[, 2],</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#  `IPCA-CV` = cv_ts[, 2],</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#  `IPCA-BAYES1` = bayes1_ts[, 2],</span></a>
<a class="sourceLine" id="cb12-14" title="14">  <span class="st">`</span><span class="dt">IPCA-BAYES2</span><span class="st">`</span> =<span class="st"> </span>bayes2_ts[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb12-15" title="15">)</a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">inf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">gather</span>(<span class="op">-</span><span class="dv">1</span><span class="op">:-</span><span class="dv">2</span>, <span class="dt">key =</span> <span class="st">"measure"</span>, <span class="dt">value =</span> <span class="st">"core"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> core, <span class="dt">linetype =</span> <span class="st">"Core"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>measure, <span class="dt">nrow =</span> <span class="dv">4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> ipca, <span class="dt">linetype =</span> <span class="st">"Headline"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">""</span>, <span class="dt">y =</span> <span class="st">"%a.m"</span>, <span class="dt">linetype =</span> <span class="st">""</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(.<span class="dv">8</span>, <span class="fl">.1</span>)) <span class="op">+</span><span class="st"> </span><span class="co"># legend.position = "bottom") +</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="st">  </span><span class="kw">scale_linetype_manual</span>(<span class="dt">values =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">Core =</span> <span class="st">"solid"</span>, <span class="dt">Headline =</span> <span class="st">"dashed"</span>))   </a></code></pre></div>
<p><img src="wavcoreinf_files/figure-html/unnamed-chunk-14-1.png" width="691.2"></p>
<p>Descriptive statistics for core inflation measures</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">inf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw">gather</span>(ipca<span class="op">:</span><span class="st">`</span><span class="dt">IPCA-BAYES2</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">"inf_core"</span>, <span class="dt">value =</span> <span class="st">"value"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(inf_core) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb14-5" title="5">    <span class="dt">mean =</span> <span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(value, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb14-6" title="6">    <span class="dt">min =</span> <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(value),</a>
<a class="sourceLine" id="cb14-7" title="7">    <span class="dt">max =</span> <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(value),</a>
<a class="sourceLine" id="cb14-8" title="8">    <span class="dt">sd =</span> <span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(value),</a>
<a class="sourceLine" id="cb14-9" title="9">    <span class="dt">cv =</span> sd <span class="op">/</span><span class="st"> </span>mean,</a>
<a class="sourceLine" id="cb14-10" title="10">    <span class="dt">tmean =</span> <span class="kw"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span>(value, ipca)<span class="op">$</span>p.value</a>
<a class="sourceLine" id="cb14-11" title="11">  ) </a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">#&gt; # A tibble: 8 x 7</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">#&gt;   inf_core     mean    min   max    sd    cv tmean</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">#&gt; 1 ipca        0.45  -0.23  1.32  0.281 0.624 1    </span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">#&gt; 2 IPCA-BAYES2 0.448  0.169 0.799 0.169 0.377 0.944</span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">#&gt; 3 IPCA-DP     0.450  0.07  0.86  0.180 0.400 0.998</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">#&gt; 4 IPCA-EX0    0.430 -0.09  1.23  0.231 0.538 0.484</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="co">#&gt; 5 IPCA-EX1    0.439 -0.13  1.34  0.221 0.504 0.707</span></a>
<a class="sourceLine" id="cb14-21" title="21"><span class="co">#&gt; 6 IPCA-EX2    0.464 -0.09  0.98  0.215 0.464 0.613</span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="co">#&gt; 7 IPCA-EX3    0.460 -0.08  0.94  0.206 0.447 0.715</span></a>
<a class="sourceLine" id="cb14-23" title="23"><span class="co">#&gt; 8 IPCA-MS     0.435  0.15  0.84  0.150 0.344 0.556</span></a></code></pre></div>
<p>n-period centered moving average</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">mavc_order &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">13</span>, <span class="dv">25</span>, <span class="dv">37</span>)</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(mavc_order) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"mavc"</span>, mavc_order)</a>
<a class="sourceLine" id="cb15-3" title="3"></a>
<a class="sourceLine" id="cb15-4" title="4">df_mavc &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_df</a></span>(mavc_order, <span class="op">~</span><span class="kw"><a href="../reference/mavc.html">mavc</a></span>(<span class="dt">x =</span> ipca, <span class="dt">k =</span> .))</a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6">df_inf_core &lt;-<span class="st"> </span>inf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IPCA =</span> ipca) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(date, ipca))</a>
<a class="sourceLine" id="cb15-9" title="9"></a>
<a class="sourceLine" id="cb15-10" title="10">rmse_mae_tbl &lt;-<span class="st"> </span><span class="kw"><a href="../reference/rmse_mae.html">rmse_mae</a></span>(df_inf_core, df_mavc)</a>
<a class="sourceLine" id="cb15-11" title="11"></a>
<a class="sourceLine" id="cb15-12" title="12">rmse_mae_tbl <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="st">  </span><span class="kw">add_column</span>(<span class="dt">a =</span> <span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(rmse_mae_tbl), <span class="dt">.before =</span> <span class="st">"rmse"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="st">  </span><span class="kw">separate</span>(a, <span class="dt">into =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"core"</span>, <span class="st">"ma"</span>, <span class="st">"stat"</span> ), <span class="dt">sep =</span> <span class="st">"_"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>stat) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="st">  </span><span class="kw">gather</span>(rmse, mae, <span class="dt">key =</span> stat, <span class="dt">value =</span> value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ma, <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/funprog.html">Reduce</a></span>(c, value))) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> stat)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">13</span>, <span class="dv">25</span>, <span class="dv">37</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-20" title="20"><span class="st">  </span><span class="kw">scale_color_discrete</span>(<span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"MAD"</span>, <span class="st">"RMSE"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>core) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-22" title="22"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color =</span> <span class="st">"Statistic"</span>,</a>
<a class="sourceLine" id="cb15-23" title="23">       <span class="dt">y =</span> <span class="st">"RMSE, MAD"</span>,</a>
<a class="sourceLine" id="cb15-24" title="24">       <span class="dt">x =</span> <span class="st">"Months used in n-period centered moving averag"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-25" title="25"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(.<span class="dv">85</span>, <span class="fl">.15</span>))</a></code></pre></div>
<p><img src="wavcoreinf_files/figure-html/unnamed-chunk-16-1.png" width="691.2"></p>
<p>No-bias</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">df_inf_core <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>IPCA) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="st">  </span><span class="kw">map_df</span>(<span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/no_bias.html">no_bias</a></span>(ipca, .)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="st">  </span><span class="kw">add_column</span>(<span class="dt">core =</span> <span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(df_inf_core)[<span class="op">-</span><span class="dv">8</span>]) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="st">  </span><span class="kw">gather</span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">`</span><span class="dt">Teste-F</span><span class="st">`</span>, <span class="st">"R2"</span> ), <span class="dt">key =</span> <span class="st">"stats"</span>, <span class="dt">value =</span> <span class="st">"value"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> core, <span class="dt">y =</span> value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>stats, <span class="dt">scales =</span> <span class="st">"free"</span>, <span class="dt">nrow =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co">#&gt; Warning: attributes are not identical across measure variables;</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">#&gt; they will be dropped</span></a></code></pre></div>
<p><img src="wavcoreinf_files/figure-html/unnamed-chunk-17-1.png" width="691.2"></p>
<p>Dynamic adjustment: headline inflation equation</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">df_inf_core <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>IPCA) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="st">  </span><span class="kw">map_df</span>(<span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/dyn_adj.html">dyn_adj</a></span>(., <span class="dt">inf =</span> ipca, <span class="dt">H =</span> <span class="dv">6</span>, <span class="dt">p =</span> <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="st">  </span><span class="kw">add_column</span>(<span class="dt">h =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">times =</span> <span class="dv">7</span>), </a>
<a class="sourceLine" id="cb17-5" title="5">             <span class="dt">var =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(df_inf_core[<span class="op">-</span><span class="dv">8</span>]), <span class="dt">each =</span> <span class="dv">6</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="st">  </span><span class="kw">gather</span>(<span class="op">-</span>h, <span class="op">-</span><span class="st"> </span>var, <span class="dt">key =</span> <span class="st">"stats"</span>, <span class="dt">value =</span> <span class="st">"value"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(stats <span class="op">==</span><span class="st"> "alpha"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> h, <span class="dt">y =</span> value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>var, <span class="dt">nrow =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">3</span>, <span class="dv">24</span>, <span class="dt">by =</span> <span class="dv">3</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/substitute.html">quote</a></span>(lambda[h]))</a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">#&gt; Warning: attributes are not identical across measure variables;</span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="co">#&gt; they will be dropped</span></a></code></pre></div>
<p><img src="wavcoreinf_files/figure-html/unnamed-chunk-18-1.png" width="691.2"></p>
<p>Dynamic adjustment: core inflation equation</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">df_inf_core <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>IPCA) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="st">  </span><span class="kw">map_df</span>(<span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/dyn_adj.html">dyn_adj</a></span>(., <span class="dt">core =</span> ipca, <span class="dt">H =</span> <span class="dv">6</span>, <span class="dt">p =</span> <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="st">  </span><span class="kw">add_column</span>(<span class="dt">h =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">times =</span> <span class="dv">7</span>),</a>
<a class="sourceLine" id="cb18-5" title="5">             <span class="dt">var =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(df_inf_core[<span class="op">-</span><span class="dv">8</span>]), <span class="dt">each =</span> <span class="dv">6</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="st">  </span><span class="kw">gather</span>(<span class="op">-</span>h, <span class="op">-</span><span class="st"> </span>var, <span class="dt">key =</span> <span class="st">"stats"</span>, <span class="dt">value =</span> <span class="st">"value"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(stats <span class="op">==</span><span class="st"> "val_p"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> h, <span class="dt">y =</span> value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>var, <span class="dt">nrow =</span> <span class="dv">3</span>)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">3</span>, <span class="dv">24</span>, <span class="dt">by =</span> <span class="dv">3</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/substitute.html">quote</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"p_value ("</span>, lambda[h] <span class="op">^</span><span class="st"> "*"</span>,<span class="st">")"</span>)))</a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">#&gt; Warning: attributes are not identical across measure variables;</span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">#&gt; they will be dropped</span></a></code></pre></div>
<p><img src="wavcoreinf_files/figure-html/unnamed-chunk-19-1.png" width="691.2"></p>
<p>Forecasting</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">pq &lt;-<span class="st"> </span><span class="kw"><a href="../reference/lags.html">lags</a></span>(<span class="dv">2</span>, <span class="dv">2</span>)</a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">ipca_fcast &lt;-<span class="st"> </span><span class="kw">map_dbl</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/model_error_single.html">model_error_single</a></span>(</a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="dv">18</span>, ipca, <span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(pq[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]), .x, <span class="dt">RMSE =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">args_best &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(ebthr_best[<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>])</a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3">args_smooth_wavelet &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="dt">thfun =</span> <span class="st">"ebayesthresh.wavelet"</span>,</a>
<a class="sourceLine" id="cb21-5" title="5">  <span class="dt">wtfun =</span> args_best[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb21-6" title="6">  <span class="dt">wtfunlist =</span> args_best[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb21-7" title="7">)</a>
<a class="sourceLine" id="cb21-8" title="8"></a>
<a class="sourceLine" id="cb21-9" title="9">args_ebayesthresh &lt;-<span class="st"> </span>args_best[<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>]</a>
<a class="sourceLine" id="cb21-10" title="10"></a>
<a class="sourceLine" id="cb21-11" title="11">ipca_bayes2_fcast &lt;-<span class="st"> </span><span class="kw">map_dbl</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="op">~</span><span class="st"> </span>rlang<span class="op">::</span><span class="kw"><a href="https://rlang.r-lib.org/reference/exec.html">exec</a></span>(</a>
<a class="sourceLine" id="cb21-12" title="12">  model_error_wave_single,</a>
<a class="sourceLine" id="cb21-13" title="13">  <span class="dt">k =</span> <span class="dv">18</span>, <span class="dt">y =</span> ipca, <span class="dt">lags =</span> pq, <span class="dt">h =</span> .x,</a>
<a class="sourceLine" id="cb21-14" title="14">  <span class="dt">RMSE =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb21-15" title="15">  <span class="op">!!!</span>args_smooth_wavelet, <span class="op">!!!</span>args_ebayesthresh</a>
<a class="sourceLine" id="cb21-16" title="16">))</a></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">wave_core_fcast &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="co">#ipca_uni_fcast,</span></a>
<a class="sourceLine" id="cb22-2" title="2">                          <span class="co">#ipca_min_fcast,</span></a>
<a class="sourceLine" id="cb22-3" title="3">                          <span class="co">#ipca_bayes1_fcast,</span></a>
<a class="sourceLine" id="cb22-4" title="4">                          <span class="co">#ipca_sure_fcast,</span></a>
<a class="sourceLine" id="cb22-5" title="5">                          <span class="co">#ipca_cv_fcast,</span></a>
<a class="sourceLine" id="cb22-6" title="6">                          ipca_bayes2_fcast)</a></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">core_fcast &lt;-<span class="st"> </span>inf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="st">`</span><span class="dt">IPCA-MS</span><span class="st">`</span>, <span class="st">`</span><span class="dt">IPCA-EX0</span><span class="st">`</span>, <span class="st">`</span><span class="dt">IPCA-EX1</span><span class="st">`</span>, <span class="st">`</span><span class="dt">IPCA-DP</span><span class="st">`</span>, <span class="st">`</span><span class="dt">IPCA-EX2</span><span class="st">`</span>, <span class="st">`</span><span class="dt">IPCA-EX3</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="st">  </span><span class="kw">map_df</span>(<span class="cf">function</span>(core) {</a>
<a class="sourceLine" id="cb23-4" title="4">    <span class="kw">map_dbl</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/model_error.html">model_error</a></span>(<span class="dv">18</span>, ipca, core, pq, .x, <span class="dt">RMSE =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb23-5" title="5">  }</a>
<a class="sourceLine" id="cb23-6" title="6">  )</a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">core_fcast <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">  </span><span class="kw">bind_cols</span>(wave_core_fcast, <span class="dt">ipca_fcast =</span> ipca_fcast) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="kw">funs</span>(. <span class="op">/</span><span class="st"> </span>ipca_fcast)) </a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">#&gt; # A tibble: 6 x 8</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="co">#&gt;   `IPCA-MS` `IPCA-EX0` `IPCA-EX1` `IPCA-DP` `IPCA-EX2` `IPCA-EX3`</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">#&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">#&gt; 1     0.993      1.02       1.04      0.999      0.991      0.993</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">#&gt; 2     0.952      0.995      1.01      0.975      0.960      0.967</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">#&gt; 3     0.976      0.948      0.983     0.928      0.944      0.955</span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">#&gt; 4     0.909      1.03       1.01      0.976      0.996      0.993</span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co">#&gt; 5     0.971      1.03       1.01      0.965      0.965      0.973</span></a>
<a class="sourceLine" id="cb24-12" title="12"><span class="co">#&gt; 6     0.955      1.06       0.996     0.948      0.910      0.912</span></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="co">#&gt; # ... with 2 more variables: ipca_bayes2_fcast &lt;dbl&gt;, ipca_fcast &lt;dbl&gt;</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#data-brazilian-headline-inflation-and-core-inflation">Data: Brazilian Headline Inflation and Core Inflation</a></li>
      <li><a href="#wavelet-core-inflation">Wavelet Core Inflation</a></li>
      <li><a href="#analysis">Analysis</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nelson Silva.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
